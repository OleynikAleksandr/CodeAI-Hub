#!/bin/bash
set -euo pipefail

REPO_ROOT="$(git rev-parse --show-toplevel)"
cd "$REPO_ROOT"

./scripts/check-architecture.sh

# Fast quality gates
echo "ğŸ” Running ESLint..."
npm run -s lint

echo "ğŸ§¹ Running Prettier check (advisory)..."
npm run -s format:check || echo "âš ï¸  Prettier differences detected (advisory). Run: npx prettier --write src" >&2

echo "ğŸŒ² ts-prune (unused exports)..."
npm run -s check:tsprune

echo "âœ… Architecture check passed (pre-commit)"
